{% extends "base.html" %}
{% block scripts %}
    <script src="{{ url_for('static', filename='js/formHelper.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('login-form');
            form.addEventListener('submit', function(e) {
                submitFormAsJSON(e, '/api/login', 
                    function(data) {
                        window.location.href = '/hardware_list';
                    },
                    function(data) {
                        // Display error message
                        const errorMsg = data.error || 'Invalid username or password';
                        alert(errorMsg);
                    }
                );
            });
        });
    </script>
{% endblock %}
{% block content %}
    <div class='page'>
        <div class='section create-ticket'>
            <h2 style="text-align:center">
                Assistant Login
            </h2>
            <h3 style="text-align:center">
                Sign In
            </h3>
            <form id="login-form" align="center" novalidate>
                <p style="text-align:center">
                    <label for="username">Username</label>
                    <input id="username" name="username" size="32" type="text" required>
                    <span id="username-error" style="color: red;"></span>
                </p>
                <p style="text-align:center">
                    <label for="password">Password</label>
                    <input id="password" name="password" size="32" type="password" required>
                    <span id="password-error" style="color: red;"></span>
                </p>
                <p style="text-align:center">
                    <input id="remember_me" name="remember_me" type="checkbox">
                    <label for="remember_me">Remember Me</label>
                </p>
                <p style="text-align:center">
                    <button type="submit">Sign In</button>
                </p>
                <p style="text-align:center">
                    <a href="{{ url_for('auth.reset_password_request') }}">Reset Password</a>
                </p>
            </form>
        </div>
    </div>
{% endblock %}
